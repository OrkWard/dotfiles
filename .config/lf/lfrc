### custom command
cmd edit-config ${{
      $EDITOR ~/.config/lf/lfrc
      lf -remote "send $id source ~/.config/lf/lfrc"
}}

cmd mkdir %mkdir "$@"
cmd touch %touch "$@"

cmd usage !dua $PWD

### custom map
map a push %mkdir<space>
map <c-n> push %touch<space>
map C edit-config
map gl %{{
    if ! [ -L "$f" ]; then
        lf -remote "send $id echoerr 'Not a symlink: $f'"
        exit 1
    fi

    target_dir=$(dirname "$(readlink -f "$f")")

    if [ -n "$target_dir" ] && [ -d "$target_dir" ]; then
        lf -remote "send $id cd \"$target_dir\""
    else
        lf -remote "send $id echoerr 'Failed to resolve symlink target directory for: $f'"
        exit 1
    fi
}}

### settings
set hidden

